{"id":856059493,"lang":"cpp","lang_name":"C++","time":"1 month, 2 weeks","timestamp":1670409773,"status":10,"status_display":"Accepted","runtime":"34 ms","url":"/submissions/detail/856059493/","is_pending":"Not Pending","title":"Invalid Transactions","memory":"13.5 MB","code":"class transaction {\npublic:\n    int time;\n    int amount;\n    string city;\n    string tran;\n    bool marked;\n    \n    transaction (int t, int a, string c, string tr) {\n        tran = tr;\n        time = t;\n        amount = a;\n        city = c;\n        marked = false;\n    }\n};\nclass Solution {\npublic:\n    vector<string> invalidTransactions(vector<string>& transactions) {\n        if(transactions.empty())\n            return {};\n        \n        unordered_map<string, vector<transaction*>> trans;\n        \n        for(string &st : transactions) {\n            istringstream ss(st);\n            string token = \"\";\n           \n            getline(ss, token, ',');\n            string name = token;\n            getline(ss, token, ',');\n            int time = stoi(token);\n            getline(ss, token, ',');\n            int amount = stoi(token);\n            getline(ss, token, ',');\n            string city = token;\n            \n            transaction *t = new transaction(time, amount, city, st);\n            trans[name].push_back(t);\n        }\n        vector<string> result;\n        \n        for(auto &p : trans) {\n           \n            sort(p.second.begin(), p.second.end(), [](const transaction* a, const transaction* b) {\n                return a->time < b->time;\n            });\n            for(int i=0; i<p.second.size(); i++) {\n                \n                if(p.second[i]->amount > 1000) {\n                    result.push_back(p.second[i]->tran);\n                    p.second[i]->marked = true;\n                }\n               \n                if(i > 0 && p.second[i]->time <= p.second[i-1]->time + 60) {\n                    int r = i-1;\n                    while(r >= 0 && p.second[r]->time >= p.second[i]->time - 60) {\n                        if(p.second[i]->city != p.second[r]->city) {\n                            if(!p.second[r]->marked) {\n                                result.push_back(p.second[r]->tran);\n                                p.second[r]->marked = true;\n                            }\n                            if(!p.second[i]->marked) {\n                                p.second[i]->marked = true;\n                                result.push_back(p.second[i]->tran);\n                            }\n                        }\n                        r--;\n                    }\n                }\n            }\n        }\n        return result;\n    }\n};","compare_result":"111111111111111111111111111111111111","title_slug":"invalid-transactions","has_notes":false}